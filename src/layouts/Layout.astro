---
interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="So Onishi's Portfolio" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/muscle-svgrepo-com.svg" />
    <title>{title}</title>
  </head>
  <body class="bg-gray-50">
    <nav class="bg-white shadow-sm">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
          <div class="flex items-center">
            <a href="/" class="text-xl font-bold text-gray-900">🤖 🏀 🍖</a>
          </div>
          <div class="flex items-center space-x-4">
            <a href="#about" class="text-gray-700 hover:text-primary" data-nav-about>About</a>
            <a href="#projects" class="text-gray-700 hover:text-primary" data-nav-projects>Projects</a>
            <a href="#skills" class="text-gray-700 hover:text-primary" data-nav-skills>Skills</a>
            <a href="#contact" class="text-gray-700 hover:text-primary" data-nav-contact>Contact</a>
            <button
              id="langToggle"
              class="px-3 py-1 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 transition-colors"
            >
              EN/JP
            </button>
          </div>
        </div>
      </div>
    </nav>
    <slot />

    <script>
      let currentLang = localStorage.getItem('lang') || 'en';

      function updateLanguage() {
        const translations = {
          en: {
            about: "About",
            projects: "Projects",
            skills: "Skills",
            contact: "Contact"
          },
          ja: {
            about: "自己紹介",
            projects: "プロジェクト",
            skills: "スキル",
            contact: "連絡先"
          }
        };

        // Update navigation text
        document.querySelector('[data-nav-about]').textContent = translations[currentLang].about;
        document.querySelector('[data-nav-projects]').textContent = translations[currentLang].projects;
        document.querySelector('[data-nav-skills]').textContent = translations[currentLang].skills;
        document.querySelector('[data-nav-contact]').textContent = translations[currentLang].contact;

        // Dispatch custom event for page content update
        document.dispatchEvent(new CustomEvent('languageChange', { detail: { lang: currentLang } }));
      }

      // Initialize language
      updateLanguage();

      // Add click handler to language toggle button
      document.getElementById('langToggle').addEventListener('click', () => {
        currentLang = currentLang === 'en' ? 'ja' : 'en';
        localStorage.setItem('lang', currentLang);
        updateLanguage();
      });
    </script>
  </body>
</html>
